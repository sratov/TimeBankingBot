# Тестирование приложения Time Banking

Этот документ содержит инструкции по запуску тестов для проверки функциональности приложения Time Banking.

## Обзор тестов

Тестовый набор включает:

1. **Тесты бэкенда (test_app.py)** - тестирование API-эндпоинтов, аутентификации и бизнес-логики
2. **Тесты фронтенда (test_frontend.py)** - тестирование пользовательского интерфейса с помощью Selenium
3. **Скрипт запуска всех тестов (run_tests.py)** - удобный способ запустить все тесты сразу

## Требования

Для запуска тестов вам потребуется:

- Python 3.7+
- Установленные зависимости из файла `requirements.txt`
- Дополнительно для тестов фронтенда:
  - Selenium WebDriver
  - ChromeDriver (для тестов с использованием Chrome)

## Установка зависимостей

```bash
# Установка основных зависимостей
pip install -r backend/requirements.txt

# Установка дополнительных зависимостей для тестов
pip install selenium requests
```

## Запуск тестов

### Запуск всех тестов

```bash
python run_tests.py
```

### Запуск только тестов бэкенда

```bash
python run_tests.py --backend
```

### Запуск только тестов фронтенда

```bash
python run_tests.py --frontend
```

### Указание URL для тестирования

```bash
python run_tests.py --api-url https://your-api-url.com --frontend-url https://your-frontend-url.com
```

## Структура логов

Все тесты сохраняют подробные логи в директории `test_logs`:

- `test_app.log` - логи тестов бэкенда
- `test_frontend.log` - логи тестов фронтенда
- `test_run.log` - логи запуска всех тестов

Кроме того, тесты фронтенда сохраняют скриншоты для визуальной проверки в директории `test_logs`.

## Описание тестов бэкенда

Файл `test_app.py` содержит следующие тесты:

1. **test_01_api_health** - проверка доступности API
2. **test_02_authentication** - тестирование аутентификации пользователя через Telegram
3. **test_03_get_current_user** - получение данных текущего пользователя
4. **test_04_create_listing** - создание новой заявки
5. **test_05_get_listings** - получение списка заявок
6. **test_06_full_listing_workflow** - тест полного цикла работы с заявкой
7. **test_07_friend_management** - тестирование управления друзьями
8. **test_08_transaction_history** - проверка истории транзакций
9. **test_09_search_users** - поиск пользователей
10. **test_10_profile_view** - просмотр профиля пользователя
11. **test_11_diagnostics** - тест диагностического эндпоинта

## Описание тестов фронтенда

Файл `test_frontend.py` содержит следующие тесты:

1. **test_01_frontend_loads** - проверка загрузки фронтенда
2. **test_02_authentication_flow** - тест процесса аутентификации
3. **test_03_main_menu** - проверка элементов главного меню
4. **test_04_create_listing_form** - тест формы создания заявки
5. **test_05_view_listings** - тест просмотра списка заявок
6. **test_06_profile_view** - тест просмотра профиля
7. **test_07_navigation_flow** - тест навигации между разделами

## Поиск и устранение проблем

### Проблемы с Selenium

Если у вас возникают проблемы с запуском тестов фронтенда, убедитесь, что:

1. Selenium установлен: `pip install selenium`
2. У вас установлен ChromeDriver и он доступен в PATH
3. Веб-приложение доступно по указанному URL

### Проблемы с тестами бэкенда

1. Проверьте, что API доступно по указанному URL
2. Убедитесь, что BOT_TOKEN правильный и актуальный
3. Проверьте, что CORS настроен корректно для доступа к API

## Интерпретация результатов

Все тесты выводят подробную информацию в логи и на консоль. Каждый тест считается успешным, если он не вызывает исключений и все проверки проходят успешно.

Общий результат выполнения тестов выводится в конце запуска и возвращается как статус выхода скрипта (0 для успеха, 1 для ошибки).

## Дополнительные ресурсы

- [Документация Selenium](https://selenium-python.readthedocs.io/)
- [Документация unittest](https://docs.python.org/3/library/unittest.html)
- [Документация FastAPI](https://fastapi.tiangolo.com/)
- [Документация Telegram Bot API](https://core.telegram.org/bots/api) 